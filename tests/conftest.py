import pytest
import shutil
import logging
from pathlib import Path
from datetime import datetime
from logger import setup_logging


@pytest.fixture(scope='session')
def setup_logger():
    log_dir = Path(f'tests/log')
    if log_dir.exists():
        shutil.rmtree(log_dir)
    log_dir.mkdir(parents=True, exist_ok=True)
    
    setup_logging(save_dir=log_dir)
    logger = logging.getLogger('unittest')
    logger.setLevel(logging.DEBUG)
    
    logger.info("This log is simply for unit-testing.")
    return logger